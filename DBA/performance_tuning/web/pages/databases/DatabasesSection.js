define(["require","exports","preact/jsx-runtime","preact/hooks","../../components/badgeNotification/BadgeNotification","../../components/table/Table","../../components/copyButton/CopyButton","./DatabasesDetailsDrawer","../../components/sectionBottomContext/SectionBottomContext","../../hooks/useFetchSectionData","../../components/loadingScreen/LoadingScreen","../../components/baseSectionContainer/BaseSectionContainer"],(function(require,t,e,a,n,l,o,d,s,i,c,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=()=>{var t,u,x,j,v,b,p,h,m,g,f,S,y;const[C,T]=(0,a.useState)({open:!1,data:null}),{data:A,error:D,isLoading:w}=(0,i.default)("../js/jsons/topology/databasesJson.js");return(0,e.jsx)(r.default,{data:A,error:D,isLoading:w,children:(0,e.jsx)("section",{children:(null===(u=null===(t=null==A?void 0:A.context)||void 0===t?void 0:t.dataAvailability)||void 0===u?void 0:u.available)?(0,e.jsxs)("div",{children:[(null===(x=null==A?void 0:A.context)||void 0===x?void 0:x.clipboardString)&&(0,e.jsx)("div",{class:"oj-flex oj-sm-justify-content-flex-end",children:(0,e.jsx)(o.default,{textToCopy:A.context.clipboardString})}),(0,e.jsx)(l.default,{id:"databasesTopologyTable","aria-label":"Databases Table",class:"oj-sm-width-full table-align-text-center",columnsDefault:{sortable:"disabled",headerClassName:"table-align-header-center"},columns:null===(v=null===(j=null==A?void 0:A.context)||void 0===j?void 0:j.databases)||void 0===v?void 0:v.columns,dataArray:null===(p=null===(b=null==A?void 0:A.context)||void 0===b?void 0:b.databases)||void 0===p?void 0:p.records,children:(0,e.jsx)("template",{slot:"rowTemplate",render:t=>D?(0,e.jsx)(n.default,{text:D,status:"danger"}):w||!A&&!D?(0,e.jsx)(c.default,{}):A&&A.available?(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:(0,e.jsx)("span",{children:t.item.data.name})}),(0,e.jsx)("td",{children:(0,e.jsx)("span",{class:`oj-badge oj-badge-subtle oj-badge-${t.item.data.status}`,children:t.item.data.databaseStatus})}),(0,e.jsx)("td",{children:(0,e.jsx)("span",{children:t.item.data.dbVersion})}),(0,e.jsx)("td",{children:(0,e.jsx)("span",{children:t.item.data.drRole})}),(0,e.jsx)("td",{children:(0,e.jsx)("span",{children:t.item.data.cpuCount})}),(0,e.jsx)("td",{children:(0,e.jsx)("span",{children:t.item.data.sgaTarget})}),(0,e.jsx)("td",{children:(0,e.jsx)("span",{children:t.item.data.pgaAggTargetAndLimit})}),(0,e.jsx)("td",{children:(0,e.jsx)("span",{children:t.item.data.processes})}),(0,e.jsx)("td",{children:(0,e.jsxs)("oj-button",{chroming:"solid",class:"oj-sm-width-full",onojAction:()=>(t=>{var e,a;const n=null===(a=null===(e=null==A?void 0:A.context)||void 0===e?void 0:e.drawers)||void 0===a?void 0:a.find((e=>e.databaseId===t));T({open:!0,data:n||null})})(t.item.data.id),children:[(0,e.jsx)("span",{slot:"startIcon",class:"oj-ux-ico-sunglasses"}),"Show"]})})]}):(0,e.jsx)(n.default,{text:"Section Unavailable",status:"info"})})}),(0,e.jsx)(d.default,{opened:C.open,data:C.data,onCloseHandler:()=>{T({open:!1,data:null})}}),(0,e.jsx)(s.default,{label:null==A?void 0:A.sectionMessage,badgeText:null!==(h=null==A?void 0:A.sectionTimeContext)&&void 0!==h?h:""})]}):(0,e.jsx)(n.default,{text:null!==(f=null===(g=null===(m=null==A?void 0:A.context)||void 0===m?void 0:m.dataAvailability)||void 0===g?void 0:g.message)&&void 0!==f?f:"Databases Section Unavailable",status:null===(y=null===(S=null==A?void 0:A.context)||void 0===S?void 0:S.dataAvailability)||void 0===y?void 0:y.status})})})}}));