define(["require","exports","preact/jsx-runtime","preact/hooks","ojs/ojarraydataprovider","../../components/plotlyContainer/PlotlyContainer","../../components/badgeNotification/BadgeNotification","../../components/table/Table","./SpaceUsageDiagnosticsTableRowRenderer","ojs/ojkeyset","ojs/ojselectsingle","ojs/ojswitch"],(function(require,e,l,o,t,a,n,i,d,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=({data:e,nodes:u})=>{var r,v,c,j,p,m,x,b,f,g;const[h,y]=(0,o.useState)((null==u?void 0:u.length)>0?u[0].value:""),[w,k]=(0,o.useState)(Object.keys(null!==(r=e[h])&&void 0!==r?r:{})[0]),P=(0,o.useMemo)((()=>e?(console.log(u),new t(null!=u?u:[],{keyAttributes:"value"})):new t([])),[u]),[A,S]=(0,o.useState)(!1),C=(0,o.useMemo)((()=>{var l;const o=Object.keys(null!==(l=e[h])&&void 0!==l?l:{}).map((e=>({label:e,value:e})));return new t(o,{keyAttributes:"value"})}),[h,e]),E=(0,o.useMemo)((()=>{var l,o,t,a;const n=null!==(a=null===(t=null===(o=null===(l=null==e?void 0:e[h])||void 0===l?void 0:l[w])||void 0===o?void 0:o.table)||void 0===t?void 0:t.records.map((e=>e.path)))&&void 0!==a?a:[];return{expanded:new s.KeySetImpl(n)}}),[e,w,h]);return(0,l.jsxs)("section",{children:[(0,l.jsxs)("div",{class:"oj-flex oj-sm-justify-content-flex-end flex-gap oj-sm-margin-2x-bottom",children:[(0,l.jsx)("oj-select-single",{class:"oj-form-control-max-width-md",labelEdge:"inside",labelHint:"Node",data:P,value:h,onvalueChanged:e=>{var l;e.detail.value!==h&&y(null!==(l=e.detail.value)&&void 0!==l?l:"")}}),(0,l.jsx)("oj-select-single",{class:"oj-form-control-max-width-md",labelEdge:"inside",labelHint:"Select Plot",data:C,value:w,onvalueChanged:e=>{var l;e.detail.value!==h&&k(null!==(l=e.detail.value)&&void 0!==l?l:"")}})]}),(null===(v=null==e?void 0:e[h])||void 0===v?void 0:v[w])&&e[h][w].plot.available?(0,l.jsx)(a.default,{plotPath:null===(j=null===(c=null==e?void 0:e[h])||void 0===c?void 0:c[w])||void 0===j?void 0:j.plot.report}):(0,l.jsx)(n.default,{text:"Plot Unavailable"}),(0,l.jsxs)("div",{class:"oj-flex oj-sm-align-items-center oj-sm-justify-content-flex-end flex-gap",children:[(0,l.jsx)("oj-label",{children:"Expand All"}),(0,l.jsx)("oj-switch",{value:A,onvalueChanged:e=>{S(e.detail.value)},"aria-label":"Expand all table entries"})]}),(0,l.jsx)(i.default,{class:"oj-sm-width-full",dataArray:null!==(x=null===(m=null===(p=null==e?void 0:e[h])||void 0===p?void 0:p[w])||void 0===m?void 0:m.table.records)&&void 0!==x?x:[],columns:null!==(g=null===(f=null===(b=null==e?void 0:e[h])||void 0===b?void 0:b[w])||void 0===f?void 0:f.table.columns)&&void 0!==g?g:[],rowExpander:!0,expandAll:A,flattenedTreeDataProviderViewOptions:E,dataProviderOptions:{keyAttributes:"path"},children:(0,l.jsx)("template",{slot:"rowTemplate",render:d.default})})]})}}));