define(["require","exports","preact/jsx-runtime","preact/hooks","../../components/badgeNotification/BadgeNotification","../../components/plotlyContainer/PlotlyContainer","../../components/table/Table","../../components/openDetailsButton/OpenDetailsButton","../../components/detailsDrawer/DetailsDrawer","oj-c/input-text"],(function(require,e,t,a,l,o,s,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=(e,t)=>{var a;return null===(a=e.find((e=>e.hostName===t)))||void 0===a?void 0:a.appliedDate};e.default=({data:e,host:d,home:c})=>{var p,u;const[h,j]=(0,a.useState)({open:!1}),[f,m]=(0,a.useState)(""),x=(0,a.useCallback)((e=>(0,t.jsxs)("tr",{class:e.item.data.patchMissing?"oj-bg-danger-30":"",children:[(0,t.jsx)("td",{children:(0,t.jsx)("span",{children:d&&r(e.item.data.hostApplication,d)})}),(0,t.jsx)("td",{children:(0,t.jsx)("span",{class:"oj-typography-bold",children:e.item.data.patchId})}),(0,t.jsx)("td",{children:e.item.data.patchDescription}),(0,t.jsx)("td",{children:(0,t.jsx)(n.default,{onojAction:()=>b(e.item.data.id)})})]})),[d,c]),b=t=>{j({open:!0,data:e.drawers.find((e=>e.patchId===t))})};return(0,t.jsxs)("section",{children:[c&&e.plots[c]&&e.plots[c].available?(0,t.jsx)(o.default,{plotPath:null!==(p=e.plots[c].report)&&void 0!==p?p:""}):(0,t.jsx)(l.default,{text:"Plot Unavailable"}),(0,t.jsx)("div",{class:"oj-flex oj-sm-justify-content-flex-end",children:(0,t.jsx)("oj-c-input-text",{class:"oj-form-control-width-md oj-sm-margin-2x-bottom",labelEdge:"inside",labelHint:"Search",placeholder:"Type to filter",value:f,onvalueChanged:e=>{var t;m(null!==(t=e.detail.value)&&void 0!==t?t:"")},clearIcon:"always"})}),(0,t.jsx)(s.default,{columns:e.table.columns,dataArray:e.table.records,filterFunction:e=>e.filter((e=>{let t=!1;if(f){let a;for(a in e)if(e[a].toString().toLowerCase().includes(f.toLowerCase())){t=!0;break}}else t=!0;return c===e.home&&e.hostApplication.find((e=>e.hostName===d))&&t})),class:"oj-sm-width-full table__scroll",children:(0,t.jsx)("template",{slot:"rowTemplate",render:x})}),(0,t.jsx)(i.default,{title:"Patch Analysis Details",opened:h.open,onCloseHandler:()=>{j({open:!1})},children:h.data?(0,t.jsx)(s.default,{"aria-label":"Details Table",columns:null===(u=h.data)||void 0===u?void 0:u.bugTable.columns,dataArray:h.data.bugTable.records,class:"table__scroll oj-sm-width-full"}):(0,t.jsx)(l.default,{text:"Patch Details for this entry are not available"})})]})}}));