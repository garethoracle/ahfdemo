var __rest=this&&this.__rest||function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(s[a[r]]=e[a[r]])}return s};define(["require","exports","preact/jsx-runtime","preact/hooks","preact","./MetadataContext"],(function(require,e,t,s,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useParams=e.useRouter=e.RouterProvider=void 0;const n=(e,t)=>{const s=new URL(t);for(const t of Object.keys(e))s.searchParams.set(t,e[t]);return s},o="home",c="Home",i=(0,a.createContext)({currentSectionData:{sectionId:"",params:{},title:""},dynamicSections:{}}),u=(0,a.createContext)({navigate:()=>{},pushParamsState:()=>{},getParamsFromUrl:()=>({}),navigateDynamicSection:()=>{},replaceParamsState:()=>{},replaceParamsStateAndCleanParams:()=>{}});e.RouterProvider=({children:e})=>{const a=(0,s.useContext)(r.MetaDataContext),d=(0,s.useMemo)((()=>{const e=[];return null==a||a.navigation.forEach((t=>{t.sections.forEach((t=>e.push({title:t.title,sectionId:t.sectionId})))})),e}),[a]),l=(0,s.useRef)({}),[m,h]=(0,s.useState)({sectionId:o,params:{},title:c}),[w,p]=(0,s.useState)({}),f=(0,s.useCallback)(((e,t,s)=>{const a=new URL(window.location.href);a.search="";const r=null!=s?s:l.current[e];if(r)for(const e of Object.keys(r))a.searchParams.set(e,r[e]);a.searchParams.set("sectionId",e),window.history.pushState({},"",a),h({sectionId:e,title:t,params:null!=r?r:{}})}),[h]),P=(0,s.useCallback)(((e,t,s,a,r=!1)=>{p((s=>s[t]?s:Object.assign(Object.assign({},s),{[t]:{element:e,shouldUnmount:r}}))),f(t,s,a)}),[f]),b=(0,s.useCallback)((e=>{const t=n(e,window.location.href),{sectionId:s}=e,a=__rest(e,["sectionId"]);h((e=>Object.assign(Object.assign({},e),{params:a}))),window.history.pushState({},"",t)}),[h]),I=(0,s.useCallback)((e=>{const t=n(e,window.location.href),{sectionId:s}=e,a=__rest(e,["sectionId"]);h((e=>Object.assign(Object.assign({},e),{params:a}))),window.history.replaceState({},"",t)}),[h]),v=(0,s.useCallback)((e=>{const t=new URL(window.location.href);t.search="";const s=n(e,t.href),{sectionId:a}=e,r=__rest(e,["sectionId"]);h((e=>Object.assign(Object.assign({},e),{params:r}))),window.history.replaceState({},"",s)}),[h]),y=(0,s.useCallback)((e=>{const t=new URL(e),s={};for(const e of t.searchParams.keys()){const a=t.searchParams.get(e);a&&(s[e]=a)}return s}),[]);(0,s.useEffect)((()=>{const e=()=>{const e=y(window.location.href),{sectionId:t}=e,s=__rest(e,["sectionId"]);if(!t){const e=new URL(window.location.href);return e.searchParams.set("sectionId",o),window.history.replaceState({},"",e),h({sectionId:o,params:{},title:c})}const a=d.find((e=>t===e.sectionId));if(!a){const e=new URL(window.location.href);return e.search="",e.searchParams.set("sectionId",o),window.history.replaceState({},"",e),h({sectionId:o,params:{},title:c})}h({title:a.title,params:s,sectionId:a.sectionId})};return e(),window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}}),[]),(0,s.useEffect)((()=>{m.sectionId&&(l.current=Object.assign(Object.assign({},l.current),{[m.sectionId]:m.params}))}),[m]);const g=(0,s.useMemo)((()=>({navigate:f,pushParamsState:b,replaceParamsStateAndCleanParams:v,replaceParamsState:I,getParamsFromUrl:y,navigateDynamicSection:P})),[f,b,v,I,y,P]);return(0,t.jsx)(i.Provider,{value:{currentSectionData:m,dynamicSections:w},children:(0,t.jsx)(u.Provider,{value:g,children:e})})};e.useRouter=()=>{const e=(0,s.useContext)(i);if(!e)throw new Error("useRouter must be used within a RouterProvider");return e};e.useParams=()=>{const e=(0,s.useContext)(u);if(!e)throw new Error("useParams must be used withing a RouterProvider and a ParamsProvider");return e}}));