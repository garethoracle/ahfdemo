var __rest=this&&this.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]])}return t};define(["require","exports","preact/jsx-runtime","preact/compat","preact/hooks","ojs/ojarraydataprovider","ojs/ojflattenedtreedataproviderview","ojs/ojarraytreedataprovider","ojs/ojkeyset","ojs/ojtable"],(function(require,e,r,t,n,a,o,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const l=(0,t.forwardRef)(((e,t)=>{var{children:l,dataArray:i,dataProviderOptions:d,flattenedTreeDataProviderViewOptions:u,class:p,rowExpander:f,expandAll:j,filterFunction:v}=e,y=__rest(e,["children","dataArray","dataProviderOptions","flattenedTreeDataProviderViewOptions","class","rowExpander","expandAll","filterFunction"]);const w=(0,n.useRef)([]),O=(0,n.useMemo)((()=>(console.log("creating data provider"),w.current=i,v&&(w.current=v(i)),f?0===w.current.length?new a(w.current,d):new o(new s(w.current,d),u):new a(w.current,d))),[i,v]),b=(0,n.useRef)(!1);(0,n.useEffect)((()=>{O instanceof o&&(u&&!b.current||O.setExpanded(j?new c.AllKeySetImpl:new c.KeySetImpl)),b.current||(b.current=!0)}),[O,j,u]);const m=(0,n.useCallback)((()=>{var e;return{records:w.current,columns:null!==(e=y.columns)&&void 0!==e?e:[]}}),[w.current]);return(0,n.useImperativeHandle)(t,(()=>({getCurrentData:m}))),(0,r.jsx)("oj-table",Object.assign({},y,{class:`border-table ${p}`,data:O,children:l}))}));e.default=(0,t.memo)(l)}));